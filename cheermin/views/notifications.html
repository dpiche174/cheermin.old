{% extends "views/base.html" %}
{% load i18n %}

{% block content %}
  <div class="container" style="padding-top: 20px;">
    <form action="" method="post" onsubmit="recipients_changed();">{% csrf_token %}
      {{ form.non_field_errors }}
      <h4>{% trans "Recipients" %}</h4>
      <div class="form-group">
        {% for recipient in form.recipients %}
          <div class="radio">
            <label for="{{ recipient.id_for_label }}">
              {{ recipient.tag }}
              {{ recipient.choice_label }}
            </label>
          </div>
        {% endfor %}
      </div>

      <div id="recipient_list" class="form-group" style="display: none;">
        <div class="row">
          <div class="col-sm-6">{% trans "Teams" %}{{ form.teams }}</div>
          <div class="col-sm-6">{% trans "Athletes" %}{{ form.athletes }}</div>
        </div>
      </div>

      <h4>Message</h4>
      <div class="form-group {% if form.subject.errors %}has-error{% endif %}">
        {% for error in form.subject.errors %}
          <p class="text-danger"><strong>{{ error|escape }}</strong></p>
        {% endfor %}
        {{ form.subject }}
      </div>
      <div class="form-group {% if form.message.errors %}has-error{% endif %}">
        {% for error in form.message.errors %}
          <p class="text-danger"><strong>{{ error|escape }}</strong></p>
        {% endfor %}
        {{ form.message }}
      </div>

      <button type="submit" class="btn btn-primary">{% trans "Send" %}</button>
      <button type="reset" class="btn btn-default" onclick="recipients_changed(null);">{% trans "Reset" %}</button>
    </form>
  </div>

  <script type="text/javascript">
    function recipients_changed(recipient) {
        if (recipient === undefined) {
            recipient = $('input[name=recipients]:checked').val();
        }
        if (recipient === "specific") {
            $("#recipient_list").show("fast");
        } else {
            $("#recipient_list").hide("fast");
        }
    }
    window.onload = recipients_changed;
  </script>
{% endblock %}
